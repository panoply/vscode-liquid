# v4.1.0 ~ vscode-liquid

This version brings with it new features and capabilities. The update focus an expanding support to [Eleventy](https://www.11ty.dev/) projects using Liquid as the template language. In addition, several new features are made available which improves overall usage.

### Grammar Improvements

Support for HTML `<script>` JSON type tags is now supported.

- Liquid infused syntax is supported within JSON
- `ld+json` attribute annotation is supported

```html
<script type="application/json">
  {
    "key": "prop"
  }
</script>

<script type="application/ld+json">
  {
    "key": "prop"
  }
</script>
```

### 11ty Support

This release ships completions support for the [11ty](https://www.11ty.dev/) static site generator. Projects can now take advantage of these awesome capabilities:

- File Completions for `includes` and `layouts`
- Data File Components for `data` files.
- Eleventy Supplied Data Completions
- Frontmatter Completions per-file level.

When working on an 11ty project, set the `engine` in your `.liquidrc` file to `11ty` and provide the necessary file globs. Only `.json` files are supported for `data` references.

<table>
<thead>
<tr>
<th width="500px">

Using a `.liquidrc` file

</th>
<th width="500px">

Using workspace `.vscode/settings.json` file

</th>
</tr>
</thead>
<tbody>
<tr>
<td>

<!-- prettier-ignore -->
```jsonc
{
  "engine": "11ty",
  "files": {
    "includes": [], // glob pattern to all includes,
    "data": []     // glob pattern to all data files
  }
}
```

</td>

<td>

<!-- prettier-ignore -->
```jsonc
{

  "liquid.engine": "11ty", // set engine to shopify
  "liquid.files.includes": [],
  "liquid.files.data": [],
}
```

</td>
</tr>
</tbody>
</table>

Frontmatter completions are automatically provided in documents but can be disabled via workspace settings:

```jsonc
{
  "liquid.completion.frontmatter": true // Set to false to prevent frontmatter completions
}
```

### Æsthetic v0.7.0-beta.1

This version ships with the latest version of Æsthetic ([v0.7.0-beta.1](https://github.com/panoply/esthetic/releases/tag/v0.7.0-beta.1)) and brings with it several major improvements to Liquid (and markup) formatting. The latest version of Æsthetic ships with **breaking changes** to the beautification rule names.

As of this release, Æsthetic is now safe enough for production usage when formatting HTML and Liquid code. Developers use Æsthetic in their projects as the superior alternative to the Prettier baked option. Over 100+ different possible formatting output styles, can handle 5k LoC with ease and is faster than the Shopify Prettier solution.

**Core Patches/Updates**

- Improved Liquid X JSON Formatting
- Improved Liquid X CSS Formatting
- Improved Error messages
- Refined handling of phrasing content in Markup and Liquid
- Fixes all comment related formatting defects

**Rule Changes**

<!-- prettier-ignore -->
```json
{
  "liquid": {
    "commentPreserve": false,       // Old Name: preserveComment
    "filterLineBreak": 0,           // Old Name: forceFilter
    "normalizeSpacing": true        // Old Name: normalizeSpacing
  },
  "markup": {
    "attributeLineBreak": 0,        // Old Name: forceAttribute
    "attributePreserve": false,     // Old Name: preserveAttribute
    "commentPreserve": false,       // Old Name: preserveComment
    "commentDelimiter": "preserve"  // Old Name: commentDelimiters
  }
}
```

**New Rules**

<!-- prettier-ignore -->
```json
{
  "liquid": {
    "allowPlebSyntactic": false,   // NEW! Allows you to write shit code like a pleb :)
    "allowRubeSyntactic": false,   // NEW! Allows you to write shit code like a rube :)
  },
  "markup": {
    "stripTextWrapLine": false,    // NEW! Controls newlines in text content
    "valueLineBreak": "preserve",  // NEW! Controls attribute value formatting
    "valueSpacing": "preserve"     // NEW! Controls whitespacing in attribute values
  }
}
```

**Deprecated Rules**

<!-- prettier-ignore -->
```json
{
  "liquid": {
    "commentNewline": false,   // DEPRECATED - No longer has any effect
  },
  "markup": {
    "commentNewline": false,   // DEPRECATED - No longer has any effect
  },
  "json":{
    "commentNewline": false,   // DEPRECATED - No longer has any effect
  },
  "style": {
    "commentNewline": false,   // DEPRECATED - No longer has any effect
  }
}
```

### Comment Support

Shopify recently made comments within `{% schema %}` and JSON files available. This release now supports comments within JSON.

---

[PR #186](https://github.com/panoply/vscode-liquid/pull/186)
